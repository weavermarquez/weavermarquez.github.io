<!-- Generated from dbca41c on 2023-12-28 @ 00:36 with Emacs 27.2 (Org mode 9.4.4) -->
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="System Crafters - David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="icon" type="image/png" href="/img/favicon.png"/><link rel="alternative" type="application/rss+xml" title="System Crafters News" href="https://weavermarquez.github.io/rss/news.xml"/><link rel="stylesheet" href="https://weavermarquez.github.io/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="https://weavermarquez.github.io/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="https://weavermarquez.github.io/css/code.css"/><link rel="stylesheet" href="https://weavermarquez.github.io/css/site.css"/><script defer="defer" data-domain="weavermarquez.github.io" src="https://plausible.io/js/plausible.js"></script><title>Getting Started with EXWM - System Crafters</title></head><body><header class="site-header"><div class="container"><div class="site-title"><img class="logo" src="https://weavermarquez.github.io/img/sc_logo.png" alt="System Crafters"/></div></div><div class="site-masthead"><div class="container"><nav class="nav"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/guides/">Guides</a> <a class="nav-link" href="/news/">News</a> <a class="nav-link" href="/community/">Community</a> <a class="nav-link" href="/">Home (2)</a> <a class="nav-link" href="/how-to-help/">How to Help</a></nav></div></div></header><div class="container"><div class="site-post"><h1 class="site-post-title">Getting Started with EXWM</h1><p class="site-post-meta"></p><div id="content"><p>
<div class="video">  <iframe src="https://www.youtube.com/embed/f7xB2fFk1tQ" allowfullscreen></iframe></div>
</p>

<p>
Check out the final code <a href="https://github.com/daviwil/emacs-from-scratch/blob/219c060e1bd695948c7691955a12a5dcaf3a9530/Emacs.org#window-management">here</a>.
</p>

<h2><a id="what-is-exwm" class="anchor" href="#what-is-exwm">¶</a>What is EXWM?</h2><div class="outline-text-2" id="text-orge596b39">
<p>
Check out the wiki: <a href="https://github.com/ch11ng/exwm/wiki">https://github.com/ch11ng/exwm/wiki</a>
</p>

<p>
<b>Benefits</b>
</p>

<ul class="org-ul">
<li>You can use your Emacs keybindings <b>everywhere</b></li>
<li>You can manage your windows like any other Emacs window</li>
<li>Instead of searching around your open windows, fuzzy match by title!</li>
<li>You can simulate Emacs keybindings in programs that don&rsquo;t support it</li>
</ul>

<p>
<b>Comparison to other WMs</b>
</p>

<ul class="org-ul">
<li>Has floating windows, fullscreen</li>
<li>You control the window placement</li>
<li>You can easily script how individual programs are handled</li>
</ul>
</div>

<h2><a id="settings-up-emacsd" class="anchor" href="#settings-up-emacsd">¶</a>Settings up .emacs.d</h2><div class="outline-text-2" id="text-orgec3941f">
<p>
Make sure to install prerequisites:
</p>

<pre>sudo apt install emacs git fonts-firacode fonts-cantarell</pre>

<pre>git clone https://github.com/daviwil/emacs-from-scratch .emacs.d</pre>

<ul class="org-ul">
<li>Disable Forge temporarily (it needs <code>gcc</code>)</li>
<li>Disable tangle on the last block</li>
</ul>
</div>

<h2><a id="how-to-boot-into-emacs" class="anchor" href="#how-to-boot-into-emacs">¶</a>How to boot into Emacs</h2><div class="outline-text-2" id="text-org32640b0">
<p>
The startup script launches anything that needs to happen before Emacs starts and then starts Emacs with a D-BUS session.
</p>

<pre><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/sh</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">NOTE: This is only for the live demo, not needed for your configuration!</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">spice-vdagent</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Fire it up</span>
<span class="org-keyword">exec</span> dbus-launch --exit-with-session emacs -mm --debug-init</pre>

<pre>[Desktop Entry]
<span class="org-variable-name">Name</span>=EXWM
<span class="org-variable-name">Comment</span>=Emacs Window Manager
<span class="org-variable-name">Exec</span>=sh /home/daviwil/.emacs.d/exwm/start-exwm.sh
<span class="org-variable-name">TryExec</span>=sh
<span class="org-variable-name">Type</span>=Application
X-LightDM-DesktopName=exwm
<span class="org-variable-name">DesktopNames</span>=exwm</pre>

<ul class="org-ul">
<li>Set this up with <code>sudo ln -f ~/.emacs.d/exwm/exwm.desktop /usr/share/xsessions/exwm.desktop</code></li>
<li>You may need to restart GDM!</li>
</ul>

<pre>sudo systemctl restart gdm</pre>
</div>

<h2><a id="setting-up-exwm" class="anchor" href="#setting-up-exwm">¶</a>Setting up EXWM</h2><div class="outline-text-2" id="text-org46baa02">
<pre>(<span class="org-keyword">defun</span> <span class="org-function-name">efs/exwm-update-class</span> ()
  (exwm-workspace-rename-buffer exwm-class-name)))

(<span class="org-keyword">use-package</span> <span class="org-constant">exwm</span>
  <span class="org-builtin">:config</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Set the default number of workspaces</span>
  (<span class="org-keyword">setq</span> exwm-workspace-number 5)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">When window "class" updates, use it to set the buffer name</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'exwm-update-class-hook #'efs/exwm-update-class)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">These keys should always pass through to Emacs</span>
  (<span class="org-keyword">setq</span> exwm-input-prefix-keys
    '(?\C-x
      ?\C-u
      ?\C-h
      ?\M-x
      ?\M-`
      ?\M-&amp;
      ?\M-:
      ?\C-\M-j  <span class="org-comment-delimiter">;; </span><span class="org-comment">Buffer list</span>
      ?\C-\ ))  <span class="org-comment-delimiter">;; </span><span class="org-comment">Ctrl+Space</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Ctrl+Q will enable the next key to be sent directly</span>
  (define-key exwm-mode-map [?\C-q] 'exwm-input-send-next-key)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Set up global key bindings.  These always work, no matter the input state!</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Keep in mind that changing this list after EXWM initializes has no effect.</span>
  (<span class="org-keyword">setq</span> exwm-input-global-keys
        `(
          <span class="org-comment-delimiter">;; </span><span class="org-comment">Reset to line-mode (C-c C-k switches to char-mode via exwm-input-release-keyboard)</span>
          ([?\s-r] . exwm-reset)

          <span class="org-comment-delimiter">;; </span><span class="org-comment">Move between windows</span>
          ([s-left] . windmove-left)
          ([s-right] . windmove-right)
          ([s-up] . windmove-up)
          ([s-down] . windmove-down)

          <span class="org-comment-delimiter">;; </span><span class="org-comment">Launch applications via shell command</span>
          ([?\s-&amp;] . (<span class="org-keyword">lambda</span> (command)
                       (<span class="org-keyword">interactive</span> (list (read-shell-command <span class="org-string">"$ "</span>)))
                       (start-process-shell-command command nil command)))

          <span class="org-comment-delimiter">;; </span><span class="org-comment">Switch workspace</span>
          ([?\s-w] . exwm-workspace-switch)

          <span class="org-comment-delimiter">;; </span><span class="org-comment">'s-N': Switch to certain workspace with Super (Win) plus a number key (0 - 9)</span>
          ,@(mapcar (<span class="org-keyword">lambda</span> (i)
                      `(,(kbd (format <span class="org-string">"s-%d"</span> i)) .
                        (<span class="org-keyword">lambda</span> ()
                          (<span class="org-keyword">interactive</span>)
                          (exwm-workspace-switch-create ,i))))
                    (number-sequence 0 9))))

  (exwm-enable))</pre>
</div>

<h2><a id="managing-windows" class="anchor" href="#managing-windows">¶</a>Managing windows</h2><div class="outline-text-2" id="text-org49cc317">
<ul class="org-ul">
<li>Use <code>M-&amp;</code> to launch a process asynchronously</li>
<li>Use <code>S-M-&amp;</code> binding from EXWM to launch without popup</li>

<li>Split windows just like you would anywhere else <code>split-window-below/right</code>, <code>evil-window-split/vsplit</code></li>
<li>Move between windows: <code>windmove-left/right/up/down</code></li>
<li>Move windows: <code>windmove-swap-states-left/right/up/down</code> (only on Emacs 27!)</li>
<li>Floating windows: <code>exwm-floating-toggle-floating</code></li>
<li>Fullscreen: <code>exwm-layout-toggle-fullscreen</code></li>
<li>line-mode vs char-mode</li>
</ul>
</div>

<h2><a id="workspaces" class="anchor" href="#workspaces">¶</a>Workspaces</h2><div class="outline-text-2" id="text-org948911c">
<ul class="org-ul">
<li><code>s+(0-9)</code> - Switch to numbered workspace</li>
<li><code>s+w</code> - Workspace selector</li>
<li><code>C-c RET</code>: Move window to numbered workspace</li>
<li><b>NOTE</b>: Windows are attached to a single workspace!</li>
<li>We will show how to display the current workspace in modeline in the next stream</li>
</ul>
</div>

<h2><a id="rebind-capslock-to-ctrl" class="anchor" href="#rebind-capslock-to-ctrl">¶</a>Rebind CapsLock to Ctrl</h2><div class="outline-text-2" id="text-org7573e13">
<p>
Contents of <code>~/.emacs/exwm/Xmodmap</code>.  Make sure <code>xmodmap</code> is installed!  This swaps CapsLock with Ctrl and places CapsLock on the Ctrl on the right side of the keyboard so you can get to it if needed.
</p>

<pre>clear lock
clear control
keycode 66 = Control_L
add control = Control_L
add Lock = Control_R</pre>

<p>
Put this in the EXWM configuration:
</p>

<pre><span class="org-comment-delimiter">;; </span><span class="org-comment">Remap CapsLock to Ctrl</span>
(start-process-shell-command <span class="org-string">"xmodmap"</span> nil <span class="org-string">"xmodmap ~/.emacs.d/exwm/Xmodmap"</span>)</pre>
</div>

<h2><a id="setting-screen-resolution" class="anchor" href="#setting-screen-resolution">¶</a>Setting screen resolution</h2><div class="outline-text-2" id="text-org9f1bf21">
<pre><span class="org-comment-delimiter">;; </span><span class="org-comment">Ensure screen updates with xrandr will refresh EXWM frames</span>
(<span class="org-keyword">require</span> '<span class="org-constant">exwm-randr</span>)
(exwm-randr-enable)</pre>

<ul class="org-ul">
<li>Generate a script with <code>arandr</code></li>
<li>Add <code>xrandr</code> invocation to the init hook</li>
</ul>

<pre><span class="org-comment-delimiter">;; </span><span class="org-comment">Set the screen resolution</span>
(start-process-shell-command <span class="org-string">"xrandr"</span> nil <span class="org-string">""</span>)</pre>

<ul class="org-ul">
<li>We will discuss multiple displays in a future stream!</li>
</ul>
</div>

<h2><a id="set-screen-dpi-optional" class="anchor" href="#set-screen-dpi-optional">¶</a>Set screen DPI (optional)</h2><div class="outline-text-2" id="text-orgefc4f57">
<p>
This belongs in <code>~/.emacs.d/exwm/Xresources</code>
</p>

<pre>Xft.dpi:   180   <span class="org-comment-delimiter"># </span><span class="org-comment">Set this to your desired DPI!  Larger number means bigger text and UI</span></pre>

<p>
Add this to <code>start-exwm.sh</code>.  Make sure <code>xrdb</code> is installed!
</p>

<pre>xrdb ~/.emacs.d/exwm/Xresources</pre>
</div>

<h2><a id="system-tray" class="anchor" href="#system-tray">¶</a>System Tray</h2><div class="outline-text-2" id="text-orgb823ec8">
<pre><span class="org-comment-delimiter">;; </span><span class="org-comment">Load the system tray before exwm-init</span>
(<span class="org-keyword">require</span> '<span class="org-constant">exwm-systemtray</span>)
(exwm-systemtray-enable)</pre>


<ul class="org-ul">
<li>Use <code>nm-applet</code> to test</li>
</ul>
</div>

<h2><a id="debugging-startup-issues" class="anchor" href="#debugging-startup-issues">¶</a>Debugging startup issues</h2><div class="outline-text-2" id="text-orgcabf246">
<ul class="org-ul">
<li><code>check-parens</code></li>
<li>Use <code>emacs -q -nw</code> in a virtual terminal</li>
<li>Use another desktop environment</li>
</ul>
</div>

<h2><a id="whatrsquos-next" class="anchor" href="#whatrsquos-next">¶</a>What&rsquo;s next?</h2><div class="outline-text-2" id="text-org264033c">
<ul class="org-ul">
<li>Setting UI and icon themes</li>
<li>Desktop notifications</li>
<li>More tips on window management and keybindings</li>
</ul>
</div>
</div></div><div class="list-form center"><div class="list-form-title">Subscribe to the System Crafters Newsletter!</div><form method="POST" action="https://www.simplelists.com/subscribe.php"><input type="hidden" name="format" value="text"/><input type="hidden" name="action" value="subscribe"/><input type="hidden" name="list" value="news@lists.systemcrafters.net"/><div class="list-form-message">Stay up to date with the latest System Crafters news and updates!  Read the <a href="/newsletter/">Newsletter</a> page for more information.</div><div class="row"><div class="column"><div class="row center list-form-label">Name (optional)</div><div class="row"><input type="text" name="name"/></div></div><div class="column"><div class="row center list-form-label">Email Address</div><div class="row"><input type="text" name="email"/></div></div></div><div><input type="submit" value="Subscribe!"/></div></form></div></div><footer class="site-footer"><div class="container"><div class="row"><div class="column"><p><a href="https://weavermarquez.github.io/privacy-policy/">Privacy Policy</a> · <a href="https://weavermarquez.github.io/credits/">Credits</a> · <a href="https://weavermarquez.github.io/rss/">RSS Feeds</a> · <a rel="me" href="https://fosstodon.org/@daviwil">Fediverse</a></p><p>© 2021-2023 System Crafters LLC, and also Weaver Ripped this off</p></div><div class="column align-right"><p><a href="https://github.com/weavermarquez/weavermarquez.github.io"><img src="https://weavermarquez.github.io/img/codeberg.png" style="width: 120px" alt="Contribute on Codeberg"/></a></p></div></div></div></footer></body></html>
