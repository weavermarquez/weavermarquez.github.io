<!-- Generated from 310d701 on 2023-12-19 @ 09:37 with Emacs 27.2 (Org mode 9.4.4) -->
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="System Crafters - David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="icon" type="image/png" href="/img/favicon.png"/><link rel="alternative" type="application/rss+xml" title="System Crafters News" href="https://weavermarquez.github.io/rss/news.xml"/><link rel="stylesheet" href="https://weavermarquez.github.io/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="https://weavermarquez.github.io/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="https://weavermarquez.github.io/css/code.css"/><link rel="stylesheet" href="https://weavermarquez.github.io/css/site.css"/><script defer="defer" data-domain="weavermarquez.github.io" src="https://plausible.io/js/plausible.js"></script><title>The Many Uses of Embark - System Crafters</title></head><body><header class="site-header"><div class="container"><div class="site-title"><img class="logo" src="https://weavermarquez.github.io/img/sc_logo.png" alt="System Crafters"/></div></div><div class="site-masthead"><div class="container"><nav class="nav"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/guides/">Guides</a> <a class="nav-link" href="/news/">News</a> <a class="nav-link" href="/community/">Community</a> <a class="nav-link" href="/">Home (2)</a> <a class="nav-link" href="/how-to-help/">How to Help</a></nav></div></div></header><div class="container"><div class="site-post"><h1 class="site-post-title">The Many Uses of Embark</h1><p class="site-post-meta">October 15, 2021</p><div class="video">  <iframe src="https://www.youtube.com/embed/qk2Is_sC8Lk" allowfullscreen></iframe></div><div id="content">
<h2><a id="updates" class="anchor" href="#updates">¶</a>Updates</h2><div class="outline-text-2" id="text-orgad7784f">
<ul class="org-ul">
<li>This week&rsquo;s video</li>
<li>I&rsquo;ve started <a href="https://github.com/daviwil/dotfiles/tree/guix-home/daviwil">converting my dotfiles</a> to use <code>guix home</code></li>
<li>I might be taking 2 weeks off starting next week!</li>
</ul>
</div>

<h2><a id="the-many-uses-of-embark" class="anchor" href="#the-many-uses-of-embark">¶</a>The Many Uses of Embark</h2><div class="outline-text-2" id="text-orgfc63a84">
<p>
Embark is a package that enables you to define context-specific actions and key bindings for different &ldquo;targets&rdquo; that you might encounter in Emacs:
</p>

<ul class="org-ul">
<li>Files</li>
<li>Buffers</li>
<li>Packages</li>
<li>Bookmarks</li>
<li>URLs</li>
<li>Identifiers (symbols, commands, variables)</li>
<li>Selected Regions</li>
</ul>

<p>
See the <a href="https://github.com/oantolin/embark/wiki/Default-Actions">Default Actions</a> wiki page and the variable <code>embark-keymap-alist</code> for a list of the default targets.
</p>

<p>
Embark can be used for a variety of different tasks:
</p>

<ul class="org-ul">
<li>A &ldquo;context menu&rdquo;</li>
<li>A command &ldquo;retargeter&rdquo;</li>
<li>A quick-action key for the thing at point</li>
<li>A way to gather completions for further actions</li>
<li>A way to switch the current minibuffer command</li>
<li>A <code>which-key</code> alternative</li>
<li>A completion interface</li>
</ul>

<p>
If you&rsquo;ve switched from Helm or Ivy to Vertico or Selectrum, Embark gives you the ability to run actions on the current completion selection, but I&rsquo;d argue that Embark is a lot more versatile than that.
</p>

<p>
We&rsquo;ll be taking a look at a few sources today for ideas on how you can use Embark in your Emacs workflow:
</p>

<ul class="org-ul">
<li>Embark README: <a href="https://github.com/oantolin/embark">https://github.com/oantolin/embark</a></li>
<li>Karthik&rsquo;s great blog post:  <a href="https://karthinks.com/software/fifteen-ways-to-use-embark/">https://karthinks.com/software/fifteen-ways-to-use-embark/</a></li>
<li><a href="https://github.com/oantolin/embark/wiki/Additional-Actions">https://github.com/oantolin/embark/wiki/Additional-Actions</a></li>
<li><a href="https://github.com/oantolin/embark/wiki/Additional-Configuration">https://github.com/oantolin/embark/wiki/Additional-Configuration</a></li>
<li>Prot&rsquo;s Embark video: <a href="https://www.youtube.com/watch?v=uoP9ZYdNCHg">https://www.youtube.com/watch?v=uoP9ZYdNCHg</a></li>
</ul>

<p>
<b>Starting Configuration</b>
</p>

<pre>(<span class="org-keyword">use-package</span> <span class="org-constant">embark</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span>
  ((<span class="org-string">"C-."</span> . embark-act)
   (<span class="org-string">"M-."</span> . embark-dwim)
   (<span class="org-string">"C-h B"</span> . embark-bindings))

  <span class="org-builtin">:init</span>
  (<span class="org-keyword">setq</span> prefix-help-command #'embark-prefix-help-command))</pre>
</div>

<h3><a id="questions" class="anchor" href="#questions">¶</a>Questions</h3><div class="outline-text-3" id="text-orgd050a09">
<ul class="org-ul">
<li>How does one use <code>embark-collect-live</code> as a completion system?</li>
<li>How can you customize the default action for <code>embark-dwim</code>?</li>
</ul>
</div>

<h3><a id="the-ldquofinalrdquo-configuration" class="anchor" href="#the-ldquofinalrdquo-configuration">¶</a>The &ldquo;final&rdquo; configuration</h3><div class="outline-text-3" id="text-org0a45cbb">
<p>
Here&rsquo;s a transcript of the configuration I was experimenting with in the stream:
</p>

<pre>(<span class="org-keyword">use-package</span> <span class="org-constant">embark</span>
  <span class="org-builtin">:straight</span> t
  <span class="org-builtin">:bind</span>
  ((<span class="org-string">"C-."</span> . embark-act)
   (<span class="org-string">"M-."</span> . embark-dwim)
   (<span class="org-string">"C-h B"</span> . embark-bindings))
  <span class="org-builtin">:init</span>
  (<span class="org-keyword">setq</span> prefix-help-command #'embark-prefix-help-command))

(<span class="org-keyword">use-package</span> <span class="org-constant">embark-consult</span>
  <span class="org-builtin">:straight</span> t)

(<span class="org-keyword">use-package</span> <span class="org-constant">ace-window</span>
  <span class="org-builtin">:straight</span> t)

(global-set-key (kbd <span class="org-string">"M-o"</span>) 'ace-window)
(<span class="org-keyword">setq</span> aw-dispatch-always t)

(<span class="org-keyword">use-package</span> <span class="org-constant">0x0</span>
  <span class="org-builtin">:straight</span> t)

(define-key embark-region-map (kbd <span class="org-string">"U"</span>) '0x0-dwim)

(<span class="org-keyword">defun</span> <span class="org-function-name">my/test-func</span> ()
  (message <span class="org-string">"~/init.el"</span>))

(<span class="org-keyword">eval-when-compile</span>
  (<span class="org-keyword">defmacro</span> <span class="org-function-name">my/embark-ace-action</span> (fn)
    `(<span class="org-keyword">defun</span> ,(intern (concat <span class="org-string">"my/embark-ace-"</span> (symbol-name fn))) ()
       (<span class="org-keyword">interactive</span>)
       (<span class="org-keyword">with-demoted-errors</span> <span class="org-string">"%s"</span>
         (<span class="org-keyword">require</span> '<span class="org-constant">ace-window</span>)
         (aw-switch-to-window (aw-select nil))
         (call-interactively (symbol-function ',fn)))))

  (<span class="org-keyword">defmacro</span> <span class="org-function-name">my/embark-split-action</span> (fn split-type)
    `(<span class="org-keyword">defun</span> ,(intern (concat <span class="org-string">"my/embark-"</span>
                             (symbol-name fn)
                             <span class="org-string">"-"</span>
                             (car (last  (split-string
                                          (symbol-name split-type) <span class="org-string">"-"</span>))))) <span class="org-warning">()</span>
       (<span class="org-keyword">interactive</span>)
       (funcall #',split-type)
       (call-interactively #',fn))))

(define-key embark-file-map     (kbd <span class="org-string">"o"</span>) (my/embark-ace-action find-file))
(define-key embark-buffer-map   (kbd <span class="org-string">"o"</span>) (my/embark-ace-action switch-to-buffer))
(define-key embark-bookmark-map (kbd <span class="org-string">"o"</span>) (my/embark-ace-action bookmark-jump))

(define-key embark-file-map     (kbd <span class="org-string">"2"</span>) (my/embark-split-action find-file split-window-below))
(define-key embark-buffer-map   (kbd <span class="org-string">"2"</span>) (my/embark-split-action switch-to-buffer split-window-below))
(define-key embark-bookmark-map (kbd <span class="org-string">"2"</span>) (my/embark-split-action bookmark-jump split-window-below))

(define-key embark-file-map     (kbd <span class="org-string">"3"</span>) (my/embark-split-action find-file split-window-right))
(define-key embark-buffer-map   (kbd <span class="org-string">"3"</span>) (my/embark-split-action switch-to-buffer split-window-right))
(define-key embark-bookmark-map (kbd <span class="org-string">"3"</span>) (my/embark-split-action bookmark-jump split-window-right))</pre>
</div>
</div></div><div class="list-form center"><div class="list-form-title">Subscribe to the System Crafters Newsletter!</div><form method="POST" action="https://www.simplelists.com/subscribe.php"><input type="hidden" name="format" value="text"/><input type="hidden" name="action" value="subscribe"/><input type="hidden" name="list" value="news@lists.systemcrafters.net"/><div class="list-form-message">Stay up to date with the latest System Crafters news and updates!  Read the <a href="/newsletter/">Newsletter</a> page for more information.</div><div class="row"><div class="column"><div class="row center list-form-label">Name (optional)</div><div class="row"><input type="text" name="name"/></div></div><div class="column"><div class="row center list-form-label">Email Address</div><div class="row"><input type="text" name="email"/></div></div></div><div><input type="submit" value="Subscribe!"/></div></form></div></div><footer class="site-footer"><div class="container"><div class="row"><div class="column"><p><a href="https://weavermarquez.github.io/privacy-policy/">Privacy Policy</a> · <a href="https://weavermarquez.github.io/credits/">Credits</a> · <a href="https://weavermarquez.github.io/rss/">RSS Feeds</a> · <a rel="me" href="https://fosstodon.org/@daviwil">Fediverse</a></p><p>© 2021-2023 System Crafters LLC, and also Weaver Ripped this off</p></div><div class="column align-right"><p><a href="https://github.com/weavermarquez/weavermarquez.github.io"><img src="https://weavermarquez.github.io/img/codeberg.png" style="width: 120px" alt="Contribute on Codeberg"/></a></p></div></div></div></footer></body></html>
